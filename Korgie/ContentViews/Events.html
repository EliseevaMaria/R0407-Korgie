<div class="dark-div" ng-click="showHideMenu()"></div>
<div class="container content">
    <div class="mobile-header" layout="row" layout-align="space-between center" hide-gt-sm>
        <button type="button" class="btn btn--m btn--blue btn--icon" ng-click="showHideMenu()">
            <i class="mdi mdi-menu"></i>
        </button>
        <h2>Events</h2>
        <div class="week-switcher">
            <input type="checkbox" id="switch1" class="switch__input" ng-model="isWeekMode" ng-click="changeMonthWeek()">
            <label for="switch1" class="switch__label">Week</label>
    </div>
    </div>

    <div id="day-mode" ng-if="dayToShow">
        <div class="day-mode-close">
            <button class="btn btn--m btn--red btn--icon" lx-ripple ng-click="closeDayMode()"><i class="mdi mdi-close"></i></button>
        </div>
        <div class="day-mode-header" layout-align="center center" layout="row">
            <div class="day-header" layout="row" layout-align="center center">
                <button hide class="btn btn--m btn--blue btn--icon" ng-click="prevDay()" lx-ripple><i class="mdi mdi-chevron-left"></i></button>
                {{dayToShow | dayMode}}
                <button hide class="btn btn--m btn--blue btn--icon" ng-click="nextDay()" lx-ripple><i class="mdi mdi-chevron-right"></i></button>
            </div>
        </div>
        <div layout="row" layout-sm="column">
            <div class="day-mode-events" layout-gt-sm="column" layout-align-gt-sm="center center">
                <div layout="row" layout-align="center center">
                    <button class="btn btn--m btn--black btn--icon" lx-ripple ng-click="opendDialog('test')" disabled><i class="mdi mdi-plus"></i></button>
                </div>
                <div class="detailed-event card" ng-repeat="event in dayToShow.events" ng-click="openDialog('test')">
                    <div class="day-mode-delete">
                        <button class="btn btn--m btn--red btn--icon" lx-ripple ng-click="deleteEvent(event.EventId)"><i class="mdi mdi-delete"></i></button>
                    </div>
                    <div class="time">{{event.Start | getStartTime}}</div>
                    <div class="title" layout="row" layout-align="center center">{{event.Title}}</div>
                    <div class="type" layout="row" layout-align="start center">
                        <div class={{event.Type}}></div>
                        {{event.Type}}
                    </div>
                </div>
            </div>
            <div class="day-mode-todos" layout="column" layout-align="space-between center">
                <div>
                    <button class="btn btn--m btn--black btn--icon" lx-ripple ng-click="opendDialog('test')" disabled><i class="mdi mdi-plus"></i></button>
                </div>
            </div>
        </div>
    </div>

    <div ng-if="!dayToShow && !isWeekMode">
        <div class="week-switcher" hide-sm>
            <input type="checkbox" id="switch1" class="switch__input" ng-model="isWeekMode" ng-click="changeMonthWeek()">
            <label for="switch1" class="switch__label">Week</label>
        </div> 
        <div layout-align="center center" layout="row">
            <div class="month-header" layout="row" layout-align="space-between center">
                <button class="btn btn--m btn--blue btn--icon" ng-click="prevMonth()" lx-ripple><i class="mdi mdi-chevron-left"></i></button>
                {{month | monthName}}, {{year}}
                <button class="btn btn--m btn--blue btn--icon" ng-click="nextMonth()" lx-ripple><i class="mdi mdi-chevron-right"></i></button>
            </div>
        </div>
        <div layout="row" layout-align="space-around center" class="week-days">
            <div>Mon</div>
            <div>Tue</div>
            <div>Wed</div>
            <div>Thu</div>
            <div>Fri</div>
            <div>Sat</div>
            <div>Sun</div>
        </div>
        <div class="month-day card" ng-repeat="calendarDay in monthDays">
            <div ng-click="showDay(calendarDay.id)" ng-class="{'disabled-month-day': calendarDay.month == undefined, 'some-events': calendarDay.types.length > 0}">
                <div class="day-number">{{calendarDay.day}}</div>
                <div class="event-container" hide-sm>
                    <div ng-repeat="type in calendarDay.types">
                        <div class={{type}}>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div ng-if="!dayToShow && isWeekMode">
        <div class="week-switcher" hide-sm>
            <input type="checkbox" id="switch1" class="switch__input" ng-model="isWeekMode" ng-click="changeMonthWeek()">
            <label for="switch1" class="switch__label">Week</label>
        </div>
        <div layout-align="center center" layout="row">
            <div class="week-header" layout="row" layout-align="center center">
                <button hide class="btn btn--m btn--blue btn--icon" ng-click="prevWeek()" lx-ripple><i class="mdi mdi-chevron-left"></i></button>
                Week {{week}}
                <button hide class="btn btn--m btn--blue btn--icon" ng-click="nextWeek()" lx-ripple><i class="mdi mdi-chevron-right"></i></button>
            </div>
        </div>
        <div class="week-mode-days" layout-gt-sm="row" layout-align="space-between start">
            <div flex ng-repeat="day in weekDays">
                <div class="week-mode-day-names card" ng-click="showDay(day.id)">
                    <div hide-sm>{{day.date | date:'EEE,'}}</div>
                    <div hide-gt-sm>{{day.date | date:'EEEE,'}}</div>
                    <div>{{day.date | date:'dd.MM.yy'}}</div>
                </div>
                <div hide-sm class="week-mode-event card" ng-repeat="event in day.events" ng-click="openDialog('test')">
                    <div layout="row" layout-align="center center">{{event.Start | getStartTime}}</div>
                    <div layout="row" layout-align="start center">{{event.Title}}</div>
                    <div class="week-mode-type" layout="row" layout-align="end center">
                        {{event.Type}}
                        <div class="{{event.Type}}"></div>
                        </div>
                    </div>
                <div hide-gt-sm class="week-mode-type" ng-repeat="type in day.types">
                    <div class="{{type}}"></div>
                </div>
            </div>
        </div>
    </div>
    <lx-dialog class="dialog dialog--l" id="test" auto-close="false">
        <div class="event" layout="column" layout-align="space-beetwen" layout-margin layout-padding>
            <div class="buttons" layout="row">
                <button class="btn btn--m btn--red btn--icon controlls-visible" lx-ripple ng-click="showHideControlls()"><i class="mdi mdi-pencil"></i></button>
                <button class="btn btn--m btn--red btn--icon" lx-ripple ng-click="deleteEvent(event.EventId)"><i class="mdi mdi-delete"></i></button>
            </div>
            <div class="center-block">
                <h1>
                    <span class="display-block controlls-visible">{{eventToEdit.Title}}</span>
                    <lx-text-field label="Title" fixed-label="true" class="controlls-unvisible">
                        <input type="text" ng-model="eventToSave.Title">
                    </lx-text-field>
                </h1>
            </div>
            <div class="center-div">
                <div layout="row" layout-sm="column">
                    <div flex=" 50">
                        <div>
                            <p>Date:</p>
                            <span class="display-block controlls-visible"> {{eventToEdit.Start | date}}</span>
                            
                            <lx-date-picker class="controlls-unvisible" model="datepicker.date" label="{{eventToSave.Start | date}}" locale="fr" allow-clear="true" ng-model="eventToSave.Start"></lx-date-picker>
                        </div>
                        <div>
                            <p>Time:</p>
                            <p class="controlls-visible">{{eventToEdit.Time | date:' HH:mm'}}</p>
                            <input class="controlls-unvisible" type="time" name="time" ng-model="eventToSave.Time">
                        </div>
                        <div>
                            <p>Type:</p>
                            <p class="controlls-visible">{{eventToEdit.Type}}</p>
                                <lx-select class="controlls-unvisible" ng-model="eventToSave.Type" placeholder="Type" choices="Types" floating-label>

                                    <lx-select-selected>
                                        {{ $selected.name }}
                                    </lx-select-selected>

                                    <lx-select-choices>
                                        {{ $choice.name }}
                                    </lx-select-choices>
                                </lx-select>
                            
                        <!--<select class="controlls-unvisible" ng-model="eventToSave.Type">
                                <option value="sport">Sport</option>
                                <option value="work">Work</option>
                                <option value="study">Study</option>
                                <option value="rest">Rest</option>
                        </select>-->
                        </div>
                    </div>
                    <div flex=" 50">
                    <div layout="row">
                        <p>Notifications: </p>
                        <p class="controlls-visible">{{eventToEdit.Notifications}}</p>
                        <input class="controlls-unvisible" type="number" min="0" ng-model="eventToSave.Notifications">
                        <p> days</p>
                        </div>
                        <div>
                            <p>Periodical:</p>
                        <p class="controlls-visible">{{eventToEdit.Period}}</p>
                        <select class="controlls-unvisible" ng-model="eventToSave.Period">
                                <option value="day">Day</option>
                                <option value="week">Week</option>
                                <option value="month">Month</option>
                                <option value="year">Year</option>
                                <option value="none">None</option>
                            </select>
                        </div>
                        <div class="checkbox" layout="row">
                            <input type="checkbox" id="checkbox1" class="checkbox__input">
                            <label for="checkbox1" class="checkbox__label">Mon</label>
                            <input type="checkbox" id="checkbox2" class="checkbox__input">
                            <label for="checkbox2" class="checkbox__label">Tue</label>
                            <input type="checkbox" id="checkbox3" class="checkbox__input">
                            <label for="checkbox3" class="checkbox__label">Wed</label>
                            <input type="checkbox" id="checkbox4" class="checkbox__input">
                            <label for="checkbox4" class="checkbox__label">Thu</label>
                            <input type="checkbox" id="checkbox5" class="checkbox__input">
                            <label for="checkbox5" class="checkbox__label">Fri</label>
                            <input type="checkbox" id="checkbox6" class="checkbox__input">
                            <label for="checkbox6" class="checkbox__label">Sut</label>
                            <input type="checkbox" id="checkbox7" class="checkbox__input">
                            <label for="checkbox7" class="checkbox__label">Sun</label>
                        </div>
                    </div>
                </div>
                <div>
                    <div>
                        <p>Description:</p>
                    <p class="controlls-visible">{{eventToEdit.Description}}</p>
                    <textarea class="controlls-unvisible">{{eventToSave.Description}}</textarea>
                    </div>
                    <div>
                        <p>Tags:</p>
                    <p class="controlls-visible">{{eventToEdit.Tags}}</p>
                    <textarea class="controlls-unvisible">{{eventToSave.Tags}}</textarea>
                    </div>
                    <div>
                        <p>Contacts:</p>
                    <!--<lx-select ng-model="selects.selectedPerson" placeholder="Lorem Ipsum" choices="people" multiple floating-label>
                        <lx-select-selected>
                            {{ $selected.uid }} - {{ $selected.name }}
                        </lx-select-selected>

                        <lx-select-choices>
                            {{ $choice.name }}
                        </lx-select-choices>
                    </lx-select>-->
                    </div>
                </div>
                <div layout="row" layout-align="end">
                <button class="btn btn--m btn--blue btn--flat " ng-click="save()" lx-ripple>Save</button>
                    <button class="btn btn--m btn--blue btn--flat" lx-ripple lx-dialog-close>Close</button>
                </div>
            </div>
    </lx-dialog>
</div>
